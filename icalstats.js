!function(){"use strict";function t(t){if(!t.summary||""===t.summary)return["no-tags"];var r=/\[([a-zA-Z\.\s\-]*?)\]/g,e=t.summary.match(r);if(!e||0===e.length)return["no-tags"];for(var n=0;n<e.length;n++)e[n]=e[n].toLowerCase().replace("[","").replace("]","");return e}function r(t){var r=t.end.getTime()-t.start.getTime(),e=r/1e3/60/60;return e}function e(t){return t.end&&t.start}var n=require("lodash");module.exports={data:null,breakdown:null,load:function(a,u,o){function i(t,r){for(var e=0;e<t.length;e++)c[t[e]]||(c[t[e]]=0),c[t[e]]+=r}function s(t){return t.start<f?!1:t.end>l?!1:!0}var f=new Date(u),d=new Date(o),l=new Date(o);l.setDate(d.getDate()+1);var c={};if(f>l)throw"Start date must be before end date";a=n(a).filter(e).filter(s).value();for(var g in a)if(a.hasOwnProperty(g)){var h=a[g];i(t(h),r(h))}this.breakdown=c,this.data=a},getHighLevelBreakdown:function(){return n.transform(this.breakdown,function(t,r,e){var n=e.split("-")[0];t[n]?t[n]+=r:t[n]=r})},getBreakdown:function(){return this.breakdown},getEarliest:function(){var t=n(this.data).sortBy("start").first();return t?t.start:null},getLatest:function(){var t=n(this.data).sortBy("start").reverse().first();return t?t.start:null},getCount:function(){return this.data.length},getTotalHours:function(){var t=n(this.breakdown).reduce(function(t,r,e){return t+r});return n.isUndefined(t)?0:t}}}();